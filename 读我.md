ApiHelper 使用须知

1. 首先，请确认已经安装过 ApiDoc，如果没有，请访问 [https://github.com/apidoc/apidoc](https://github.com/apidoc/apidoc)

        安装很简单，概括下：
        
        1.  安装 nodejs: http://nodejs.cn/download 下载nodejs，一路点击“下一步”就安装好了        
        2.  安装 apidoc: 在nodejs安装目录下执行 npm install -g apidoc 

2. 然后，请在 apiHelper.properties 里设置恰当的参数。简单使用就填三个参数即可：

	    # 项目路径
		modulePath=D:/workspace/tcc

		# 如果没有依赖jar，可以不填
		classPath=D:/repository/xxx.jar;D:/project2/target/classes

		# 模板路径，默认指向当前路径即可
		template=template

3. 在templatePath指定目录下有对应的模板文件，模板文件可以在 src/main/resources/template 中复制出来。一共有四个：

	
	**apidoc_template.ftl**
	
		/**
		 * @api {${APIMETHOD}} /${APIGROUP}/${PATH} ${LABELNAME}
		 * @apiVersion 1.0.0
		 * @apiName ${APINAME}
		 * @apiGroup ${APIGROUP}
		 * @apiExample Example
		 *   http://ip:port/${APIGROUP}/${PATH}
		<#if DESC!=''>
		 * @apiDescription <b>使用说明：</b>${DESC}
		</#if>
		<#if PARAM_LIST??>
		${PARAM_LIST}
		</#if>
		<#if REQUEST_JSON??>
		 * @apiParamExample {json} 接口请求入参示例
		${REQUEST_JSON}
		</#if>
		 * @apiSuccess {String} success true:成功, false:失败
		 * @apiSuccess {String} msg 返回信息
		 * @apiSuccessExample {json} 接口数据响应示例
		${RESPONSE_JSON}
		 */
	
	
	**markdown_template.ftl**
	
		## ${LABELNAME} ##
		
		##### 请求方式: ${APIMETHOD}
		##### URL:  http://ip:port/${APIGROUP}/${PATH}
		
		<#if DESC??>
		#####  使用说明
		> ${DESC}
		</#if>
		
		<#if PARAM_LIST??>
		#####   请求参数
		| 参数名      | 类型 | 说明|
		| :-------- | :--------| :--: |
		${PARAM_LIST}
		</#if>
		
		<#if REQUEST_JSON??>
		#####  接口请求入参示例:
		${REQUEST_JSON}
		</#if>
		
		<#if RESPONSE_JSON??>
		##### 接口数据响应示例：
		${RESPONSE_JSON}
		</#if>
		
		----------
	
	**response_json.ftl**
	
		{
		"msg": "",
		"additionalInfo": {},
		<#if RESPONSE_JSON??>
		"value": ${RESPONSE_JSON},
		</#if>
		"success": true
		}
	
	
	**help.ftl**
	
		
		##############   使用帮助：  ################
		1 在运行本程序前，建议先给方法和字段名添加必要的注释
		2 在运行本程序前，请先在程序同级目录下的apiHelper.properties中设置相应值并且准备好相应的template，具体设置请参见README.md
		3 请运行程序 java -jar MainGenerator.jar，目前支持生成ApiDoc, Postman, Markdown格式文件
		#############################################


4. Windows 下双击运行 runApiHelper.bat 即可，直接在当前目录生成中间文件（**__autoAPI**目录）以及最终文档(**final**目录)。当然你也可以分步运行：
     
	    # 生成中间文件： __autoAPI/apidoc 和 __autoAPI/postman 
		java -jar ApiHelper.jar 
	 
		# 生成最终apidoc文档： final目录
	    apidoc -i __autoAPI/apidoc -o final/ -f ".txt" 
          

	如果你是基于源码，那么打包生成ApiDoc.jar也很容易，在项目根路径下执行maven命令就能获得jar包：

		mvn clean
		mvn package 


	**runApiHelper.bat**：

		java -jar ApiHelper.jar 

		ping -n 20 127.1>nul | apidoc -i __autoAPI/apidoc -o final/ -f ".txt"

5. 导入postman
       
		打开 Postman 工具点击 Import 按钮，选择 __autoAPI/postman/postman.json 进行导入操作。

6. apidoc

		当前目录下的final目录即最终apidoc生成目录。

7. markdown

		在 __autoAPI/markdown/ 目录下，把相应内容拷入wiki即可。如果有额外需求，直接修改template/markdown_template.ftl 即可。



